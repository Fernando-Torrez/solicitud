<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>¿Nos damos una oportunidad?</title>

  <!-- Fuentes -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
  <!-- EmailJS -->
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3.2.0/dist/email.min.js"></script>

  <style>
    :root{
      --rose:#e1a3b0;
      --rose-deep:#c48393;
      --petal:#ffe9ef;
      --petal-2:#fff6f9;
      --ink:#3d3a3a;
      --muted:#6b6565;
      --card:#ffffff;
      --ring: 0 10px 30px rgba(197, 128, 148, .20);
    }

    *{box-sizing:border-box}

    body{
      margin:0;
      min-height:100vh;
      font-family:'Quicksand', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--ink);
      background:
        radial-gradient(60% 50% at 20% 10%, var(--petal) 0%, transparent 60%),
        radial-gradient(50% 50% at 80% 0%, var(--petal-2) 0%, transparent 60%),
        linear-gradient(180deg, #fff 0%, #fff7fb 60%, #fff 100%);
      display:grid;
      place-items:center;
      padding:24px;
      overflow-x:hidden;
    }

    /* Motitas suaves */
    .blush{
      position:fixed;
      inset:0;
      pointer-events:none;
      background:
        radial-gradient(120px 120px at 10% 20%, rgba(225,163,176,.25) 0 60%, transparent 61%),
        radial-gradient(160px 160px at 90% 15%, rgba(225,163,176,.20) 0 60%, transparent 61%),
        radial-gradient(200px 200px at 80% 90%, rgba(225,163,176,.18) 0 60%, transparent 61%),
        radial-gradient(180px 180px at 15% 85%, rgba(225,163,176,.15) 0 60%, transparent 61%);
      z-index:0;
    }

    .card{
      position:relative;
      width:min(720px, 92vw);
      background:rgba(255,255,255,.86);
      backdrop-filter: blur(8px);
      border-radius:20px;
      box-shadow: var(--ring);
      padding:32px 28px 26px;
      overflow:hidden;
      transform:translateY(18px);
      opacity:0;
      animation:fadeInUp .8s ease-out forwards;
      z-index:1;
    }

    /* Borde superior con gradiente delicado */
    .card::before{
      content:"";
      position:absolute;
      left:0; top:0; width:100%; height:6px;
      background:linear-gradient(90deg, var(--rose) 0%, #f3b5c3 30%, #f6cbd6 70%, var(--rose-deep) 100%);
    }

    @keyframes fadeInUp{
      to{ transform:translateY(0); opacity:1; }
    }

    .heading{
      text-align:center;
      margin:2px 0 18px;
    }
    .eyebrow{
      display:inline-block;
      padding:.25rem .75rem;
      border-radius:999px;
      background:#fff3f7;
      border:1px solid #ffe1ea;
      color:var(--rose-deep);
      font-weight:600;
      font-size:.9rem;
      letter-spacing:.02em;
    }
    h1{
      font-family:'Playfair Display', serif;
      font-size:clamp(1.65rem, 2.3rem, 2.6rem);
      margin:10px 0 4px;
      color:var(--rose-deep);
      line-height:1.2;
    }
    .subtitle{
      color:var(--muted);
      font-size:1rem;
      margin:0 auto 16px;
      max-width:45ch;
    }

    .note{
      margin:22px auto 24px;
      max-width:60ch;
      background:linear-gradient(180deg,#fff 0%, #fff9fc 100%);
      border:1px solid #ffe3ee;
      border-radius:16px;
      padding:18px 16px;
      line-height:1.7;
      color:#4a4546;
      position:relative;
    }
    .note::before{
      content:"✦";
      position:absolute;
      left:14px; top:-12px;
      font-size:1.1rem;
      background:#fff;
      color:var(--rose-deep);
      padding:6px 10px;
      border:1px solid #ffe3ee;
      border-radius:999px;
      box-shadow:0 4px 12px rgba(0,0,0,.04);
    }
    .note em{
      font-style:normal;
      color:var(--rose-deep);
      font-weight:600;
    }

    .question{
      text-align:center;
      font-size:1.15rem;
      margin:6px 0 18px;
      color:#544f50;
    }

    .buttons{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      justify-content:center;
      margin:10px 0 6px;
    }
    .btn{
      border:0;
      padding:12px 22px;
      border-radius:999px;
      font-weight:700;
      font-size:1rem;
      cursor:pointer;
      transition: transform .08s ease, box-shadow .2s ease, background .2s ease, color .2s ease;
      position:relative;
      outline-offset:3px;
    }
    .btn:active{ transform:translateY(1px) scale(0.99); }

    .btn-primary{
      background:linear-gradient(180deg, var(--rose) 0%, var(--rose-deep) 100%);
      color:white;
      box-shadow:0 8px 20px rgba(196,131,147,.35);
    }
    .btn-primary:hover{
      box-shadow:0 10px 24px rgba(196,131,147,.42);
      filter:saturate(1.05);
    }

    .btn-ghost{
      background:#fff;
      color:#6d6568;
      border:1px solid #e8d6dc;
    }
    .btn-ghost:hover{
      background:#fff6f9;
      color:#544f52;
    }

    .legal{
      text-align:center;
      font-size:.86rem;
      color:#8a8386;
      margin:14px 0 0;
    }

    .status{
      display:none;
      margin:18px auto 0;
      text-align:center;
      font-weight:600;
      color:#2f2a2c;
      animation:fade .4s ease;
    }
    @keyframes fade{from{opacity:0} to{opacity:1}}

    .loading{
      display:none;
      margin:18px auto 0;
      text-align:center;
      color:#6b6568;
    }
    .spinner{
      width:30px; height:30px; margin:0 auto 8px;
      border-radius:50%;
      border:4px solid rgba(196,131,147,.22);
      border-top-color: var(--rose-deep);
      animation:spin 1s linear infinite;
    }
    @keyframes spin{to{transform:rotate(360deg)}}

    /* Corazoncitos */
    .heart{
      position:fixed;
      width:14px; height:14px;
      left:50%; top:50%;
      transform:translate(-50%,-50%);
      background:
        radial-gradient(circle at 30% 30%, #fff 0 28%, transparent 30%),
        radial-gradient(circle at 70% 30%, #fff 0 28%, transparent 30%),
        linear-gradient(#fff 0 0) bottom/100% 62% no-repeat;
      clip-path: polygon(50% 84%, 0 40%, 25% 0, 50% 20%, 75% 0, 100% 40%);
      pointer-events:none;
      opacity:0;
      z-index:999;
    }

    /* Separador floral */
    .divider{
      display:flex; align-items:center; gap:10px; margin:18px auto 14px; width:min(380px, 80%);
      color:#d2a9b4;
    }
    .divider::before, .divider::after{
      content:"";
      flex:1; height:1px; background:linear-gradient(90deg, transparent, #f1c8d3, transparent);
    }
  </style>
</head>
<body>
  <div class="blush" aria-hidden="true"></div>

  <main class="card" role="dialog" aria-labelledby="titulo" aria-describedby="mensaje">
    <div class="heading">
      <span class="eyebrow">Invitación especial</span>
      <h1 id="titulo">¿Nos damos una oportunidad?</h1>
      <p class="subtitle">Prometo que será sencillo: una charla, risas genuinas y cero prisas.</p>
    </div>

    <section class="note" id="mensaje">
      He estado pensando en lo bonito que puede ser cuando dos personas se dan la oportunidad de <em>conocerse de verdad</em>.
      No busco promesas, solo un momento para coincidir y dejar que la vida nos sorprenda.
      Tal vez sea solo una buena conversación… o quizá algo lindo esté por comenzar. ¿Te animas? 💫
    </section>

    <div class="divider">✿</div>

    <p class="question">¿Te gustaría compartir una cita conmigo?</p>

    <div class="buttons" role="group" aria-label="Opciones de respuesta">
      <button class="btn btn-primary" id="yes-btn">Sí, vamos 💖</button>
      <button class="btn btn-ghost" id="no-btn">Tal vez después</button>
    </div>

    <div class="loading" id="loading">
      <div class="spinner" aria-hidden="true"></div>
      <div>Enviando tu respuesta…</div>
    </div>

    <p class="status" id="positive-response" aria-live="polite">¡Qué ilusión! Gracias por decir que sí. ✨</p>
    <p class="status" id="negative-response" aria-live="polite">Gracias por tu sinceridad. Si cambias de idea, aquí estaré. 🌷</p>

    <p class="legal">Tu respuesta se enviará de forma privada. Solo se usará para saber tu decisión.</p>
  </main>

  <script>
    // Inicializar EmailJS (mantiene tus credenciales actuales)
    emailjs.init('B1-PAr0OwHo-wb6FS');

    const yesBtn = document.getElementById('yes-btn');
    const noBtn  = document.getElementById('no-btn');
    const positiveResponse = document.getElementById('positive-response');
    const negativeResponse = document.getElementById('negative-response');
    const loading = document.getElementById('loading');

    // Pequeña lluvia de corazones al aceptar
    function popHearts(count = 16){
      for(let i=0;i<count;i++){
        const h = document.createElement('div');
        h.className = 'heart';
        const size = 12 + Math.random()*10;
        const startX = 50 + (Math.random()*40 - 20); // alrededor del centro
        const startY = 55 + (Math.random()*10 - 5);
        const dx = (Math.random()*60 - 30); // desplazamiento horizontal
        const dy = 80 + Math.random()*80;   // altura de subida
        const delay = Math.random()*0.06;

        h.style.left = startX + 'vw';
        h.style.top  = startY + 'vh';
        h.style.width = h.style.height = size + 'px';
        h.style.opacity = '0.9';
        h.style.background =
          'radial-gradient(circle at 30% 30%, #ffdbe6 0 28%, transparent 30%),' +
          'radial-gradient(circle at 70% 30%, #ffdbe6 0 28%, transparent 30%),' +
          'linear-gradient(#ffdbe6 0 0) bottom/100% 62% no-repeat';

        document.body.appendChild(h);

        h.animate([
          { transform:`translate(-50%,-50%) translate(0,0) scale(0.9)`, opacity:0 },
          { opacity:1, offset: .15 },
          { transform:`translate(-50%,-50%) translate(${dx}px, -${dy}px) scale(1.05)`, opacity:0 }
        ], { duration: 1600 + Math.random()*600, easing:'cubic-bezier(.22,.61,.36,1)', delay });

        setTimeout(()=>h.remove(), 2400);
      }
    }

    function sendEmailResponse(responseText, accepted){
      loading.style.display = 'block';
      positiveResponse.style.display = 'none';
      negativeResponse.style.display = 'none';

      const responseMessage = accepted
        ? "✅ Dijo SÍ a la invitación (¡con ilusión!)"
        : "❌ Esta vez no aceptó la invitación";

      const templateParams = {
        to_email: 'appsinstalador1234@gmail.com',
        message: responseMessage,
        date: new Date().toLocaleString('es-ES', {
          weekday: 'long', year: 'numeric', month: 'long', day: 'numeric',
          hour: '2-digit', minute: '2-digit'
        }),
        respuesta: responseText
      };

      emailjs.send('service_2m33mni', 'template_2nh2ba8', templateParams)
        .then(function(){
          loading.style.display = 'none';
          if(accepted){
            positiveResponse.style.display = 'block';
            // efecto visual
            document.querySelector('.card').style.boxShadow = '0 0 28px rgba(196,131,147,.45)';
            popHearts(18);
          }else{
            negativeResponse.style.display = 'block';
          }
        })
        .catch(function(err){
          loading.style.display = 'none';
          alert('Hubo un problemita enviando el mensaje. Por favor, recarga e intenta de nuevo.');
          console.error('Detalle del error:', err);
        });
    }

    yesBtn.addEventListener('click', function(){
      sendEmailResponse('Sí, me encantaría conocernos 💖', true);
    });

    noBtn.addEventListener('click', function(){
      sendEmailResponse('Tal vez en otro momento, gracias ✨', false);
    });

    // Accesibilidad básica con Enter/Espacio
    [yesBtn, noBtn].forEach(b=>{
      b.addEventListener('keyup', (e)=>{
        if(e.key === 'Enter' || e.key === ' '){
          b.click();
        }
      });
    });
  </script>
</body>
</html>
