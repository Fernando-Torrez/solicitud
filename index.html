<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Â¿Nos damos una oportunidad?</title>

  <!-- Fuentes -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
  <!-- EmailJS -->
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3.2.0/dist/email.min.js"></script>

  <style>
    :root{
      /* Paleta celeste */
      --sky: #8bd3f7;         /* celeste suave */
      --sky-deep: #49a9e2;    /* celeste mÃ¡s intenso */
      --mist: #e9f7ff;        /* fondo muy claro */
      --mist-2: #f4fbff;
      --ink: #2f3a44;
      --muted: #64707a;
      --card: #ffffff;
      --ring: 0 10px 30px rgba(73, 169, 226, .20);
    }

    * { box-sizing: border-box }

    body{
      margin:0;
      min-height:100vh;
      font-family:'Quicksand', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--ink);
      background:
        radial-gradient(60% 50% at 20% 10%, var(--mist) 0%, transparent 60%),
        radial-gradient(50% 50% at 80% 0%, var(--mist-2) 0%, transparent 60%),
        linear-gradient(180deg, #fff 0%, #f7fcff 60%, #fff 100%);
      display:grid;
      place-items:center;
      padding:24px;
      overflow-x:hidden;
    }

    .aura{
      position:fixed; inset:0; pointer-events:none; z-index:0;
      background:
        radial-gradient(140px 140px at 10% 20%, rgba(73,169,226,.18) 0 60%, transparent 61%),
        radial-gradient(160px 160px at 90% 15%, rgba(73,169,226,.16) 0 60%, transparent 61%),
        radial-gradient(220px 220px at 80% 90%, rgba(73,169,226,.14) 0 60%, transparent 61%),
        radial-gradient(180px 180px at 15% 85%, rgba(73,169,226,.12) 0 60%, transparent 61%);
    }

    .card{
      position:relative; z-index:1;
      width:min(720px, 92vw);
      background:rgba(255,255,255,.9);
      backdrop-filter: blur(8px);
      border-radius:20px;
      box-shadow: var(--ring);
      padding:32px 28px 26px;
      overflow:hidden;
      transform:translateY(18px);
      opacity:0;
      animation:fadeInUp .8s ease-out forwards;
    }
    .card::before{
      content:"";
      position:absolute; left:0; top:0; width:100%; height:6px;
      background:linear-gradient(90deg, var(--sky) 0%, #a7e1ff 30%, #c6edff 70%, var(--sky-deep) 100%);
    }
    @keyframes fadeInUp{ to{ transform:translateY(0); opacity:1 } }

    .heading{ text-align:center; margin:2px 0 18px; }
    .eyebrow{
      display:inline-block; padding:.25rem .75rem; border-radius:999px;
      background:#f0faff; border:1px solid #d6efff; color:var(--sky-deep);
      font-weight:600; font-size:.9rem; letter-spacing:.02em;
    }
    h1{
      font-family:'Playfair Display', serif;
      font-size:clamp(1.65rem, 2.3rem, 2.6rem);
      margin:10px 0 4px; color:var(--sky-deep); line-height:1.2;
    }
    .subtitle{ color:var(--muted); font-size:1rem; margin:0 auto 16px; max-width:45ch; }

    .note{
      position:relative;
      margin:22px auto 24px; max-width:60ch;
      background:linear-gradient(180deg,#fff 0%, #f4fbff 100%);
      border:1px solid #dff1ff;
      border-radius:16px; padding:18px 16px; line-height:1.7; color:#33424c;
    }
    /* Badge superior con estrellita centrada */
    .note::before{
      content:"â˜…";
      position:absolute;
      top:-14px; left:50%;
      transform:translateX(-50%);
      font-size:1.05rem;
      background:#ffffff;
      color:var(--sky-deep);
      padding:6px 10px;
      border:1px solid #dff1ff;
      border-radius:999px;
      box-shadow:0 4px 12px rgba(0,0,0,.05);
      line-height:1;
    }
    .note em{ font-style:normal; color:var(--sky-deep); font-weight:600; }

    .question{ text-align:center; font-size:1.15rem; margin:6px 0 18px; color:#3a4a55; }

    .buttons{
      display:flex; gap:12px; flex-wrap:wrap; justify-content:center; margin:10px 0 6px;
    }
    .btn{
      border:0; padding:12px 22px; border-radius:999px; font-weight:700; font-size:1rem;
      cursor:pointer; transition: transform .08s ease, box-shadow .2s ease, background .2s ease, color .2s ease;
      outline-offset:3px;
    }
    .btn:active{ transform:translateY(1px) scale(0.99); }

    .btn-primary{
      background:linear-gradient(180deg, var(--sky) 0%, var(--sky-deep) 100%);
      color:white; box-shadow:0 8px 20px rgba(73,169,226,.35);
    }
    .btn-primary:hover{ box-shadow:0 10px 24px rgba(73,169,226,.42); filter:saturate(1.05); }

    .btn-ghost{
      background:#fff; color:#5a6873; border:1px solid #d6e8f5;
    }
    .btn-ghost:hover{ background:#f0f8ff; color:#42515b; }

    .status{
      display:none; margin:18px auto 0; text-align:center; font-weight:600; color:#2f3a44; animation:fade .4s ease;
    }
    @keyframes fade{ from{opacity:0} to{opacity:1} }

    .loading{ display:none; margin:18px auto 0; text-align:center; color:#5a6873; }
    .spinner{
      width:30px; height:30px; margin:0 auto 8px; border-radius:50%;
      border:4px solid rgba(73,169,226,.22); border-top-color: var(--sky-deep);
      animation:spin 1s linear infinite;
    }
    @keyframes spin{ to{ transform:rotate(360deg) } }

    /* Corazones celestes */
    .heart{
      position:fixed; width:14px; height:14px; left:50%; top:50%;
      transform:translate(-50%,-50%);
      background:
        radial-gradient(circle at 30% 30%, #d6efff 0 28%, transparent 30%),
        radial-gradient(circle at 70% 30%, #d6efff 0 28%, transparent 30%),
        linear-gradient(#d6efff 0 0) bottom/100% 62% no-repeat;
      clip-path: polygon(50% 84%, 0 40%, 25% 0, 50% 20%, 75% 0, 100% 40%);
      pointer-events:none; opacity:0; z-index:999;
    }

    .divider{
      display:flex; align-items:center; gap:10px; margin:18px auto 14px; width:min(380px, 80%);
      color:#95cdee;
    }
    .divider::before, .divider::after{
      content:""; flex:1; height:1px; background:linear-gradient(90deg, transparent, #c7e8fb, transparent);
    }
  </style>
</head>
<body>
  <div class="aura" aria-hidden="true"></div>

  <main class="card" role="dialog" aria-labelledby="titulo" aria-describedby="mensaje">
    <div class="heading">
      <span class="eyebrow">InvitaciÃ³n especial</span>
      <h1 id="titulo">Â¿Nos damos una oportunidad?</h1>
      <p class="subtitle">Prometo que serÃ¡ sencillo: una charla, risas genuinas y cero prisas.</p>
    </div>

    <section class="note" id="mensaje">
      He estado pensando en lo bonito que puede ser cuando dos personas se dan la oportunidad de <em>conocerse de verdad</em>.
      No busco promesas, solo un momento para coincidir y dejar que la vida nos sorprenda.
      Y si no compartimos todos los gustos, estÃ¡ bien: <em>no tenemos que coincidir en todo</em> para que algo lindo florezca;
      a veces lo diferente se complementa y hace la historia mÃ¡s especial. âœ¨
    </section>

    <div class="divider">âœº</div>

    <p class="question">Â¿Te gustarÃ­a compartir una cita conmigo?</p>

    <div class="buttons" role="group" aria-label="Opciones de respuesta">
      <button class="btn btn-primary" id="yes-btn">SÃ­, vamos ðŸ’™</button>
      <button class="btn btn-ghost" id="no-btn">Tal vez despuÃ©s</button>
    </div>

    <div class="loading" id="loading">
      <div class="spinner" aria-hidden="true"></div>
      <div>Enviando tu respuestaâ€¦</div>
    </div>

    <p class="status" id="positive-response" aria-live="polite">Â¡QuÃ© ilusiÃ³n! Gracias por decir que sÃ­. âœ¨</p>
    <p class="status" id="negative-response" aria-live="polite">Gracias por tu sinceridad. Si cambias de idea, aquÃ­ estarÃ©. ðŸŒŠ</p>
  </main>

  <script>
    // Inicializa EmailJS (dejas tus credenciales)
    emailjs.init('B1-PAr0OwHo-wb6FS');

    const yesBtn = document.getElementById('yes-btn');
    const noBtn  = document.getElementById('no-btn');
    const positiveResponse = document.getElementById('positive-response');
    const negativeResponse = document.getElementById('negative-response');
    const loading = document.getElementById('loading');

    function popHearts(count = 16){
      for(let i=0;i<count;i++){
        const h = document.createElement('div');
        h.className = 'heart';
        const size = 12 + Math.random()*10;
        const startX = 50 + (Math.random()*40 - 20);
        const startY = 55 + (Math.random()*10 - 5);
        const dx = (Math.random()*60 - 30);
        const dy = 80 + Math.random()*80;
        const delay = Math.random()*0.06;

        h.style.left = startX + 'vw';
        h.style.top  = startY + 'vh';
        h.style.width = h.style.height = size + 'px';
        h.style.opacity = '0.9';

        document.body.appendChild(h);

        h.animate([
          { transform:`translate(-50%,-50%) translate(0,0) scale(0.9)`, opacity:0 },
          { opacity:1, offset: .15 },
          { transform:`translate(-50%,-50%) translate(${dx}px, -${dy}px) scale(1.05)`, opacity:0 }
        ], { duration: 1600 + Math.random()*600, easing:'cubic-bezier(.22,.61,.36,1)', delay });

        setTimeout(()=>h.remove(), 2400);
      }
    }

    function sendEmailResponse(responseText, accepted){
      loading.style.display = 'block';
      positiveResponse.style.display = 'none';
      negativeResponse.style.display = 'none';

      const responseMessage = accepted
        ? "âœ… Dijo SÃ a la invitaciÃ³n (Â¡con ilusiÃ³n!)"
        : "âŒ Esta vez no aceptÃ³ la invitaciÃ³n";

      const templateParams = {
        to_email: 'appsinstalador1234@gmail.com',
        message: responseMessage,
        date: new Date().toLocaleString('es-ES', {
          weekday: 'long', year: 'numeric', month: 'long', day: 'numeric',
          hour: '2-digit', minute: '2-digit'
        }),
        respuesta: responseText
      };

      emailjs.send('service_2m33mni', 'template_2nh2ba8', templateParams)
        .then(function(){
          loading.style.display = 'none';
          if(accepted){
            positiveResponse.style.display = 'block';
            document.querySelector('.card').style.boxShadow = '0 0 28px rgba(73,169,226,.45)';
            popHearts(18);
          }else{
            negativeResponse.style.display = 'block';
          }
        })
        .catch(function(err){
          loading.style.display = 'none';
          alert('Hubo un problemita enviando el mensaje. Por favor, recarga e intenta de nuevo.');
          console.error('Detalle del error:', err);
        });
    }

    yesBtn.addEventListener('click', ()=> sendEmailResponse('SÃ­, me encantarÃ­a conocernos ðŸ’™', true));
    noBtn.addEventListener('click',  ()=> sendEmailResponse('Tal vez en otro momento, gracias âœ¨', false));

    [yesBtn, noBtn].forEach(b=>{
      b.addEventListener('keyup', (e)=>{
        if(e.key === 'Enter' || e.key === ' '){ b.click(); }
      });
    });
  </script>
</body>
</html>
